<%- include('partials/header.ejs'); -%>

<head>
  <meta charset="UTF-8">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/foundation/5.5.0/css/foundation.css'>
  <link rel="stylesheet" href="../assets/alert/style.css">
<style>
        /* .dropbtn {
      background-color: #04AA6D;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
      cursor: pointer;
    } */
    
        .dropbtn:hover,
        .dropbtn:focus {
          background-color: #3e8e41;
        }
    
        #myInput {
          box-sizing: border-box;
          background-image: url('searchicon.png');
          background-position: 14px 12px;
          background-repeat: no-repeat;
          font-size: 16px;
          padding: 14px 20px 12px 45px;
          border: none;
          border-bottom: 1px solid #ddd;
        }
    
        #myInput:focus {
          outline: 3px solid #ddd;
        }
    
        .dropdown {
          position: relative;
          display: inline-block;
        }
    
        .dropdown-content {
          display: none;
          position: absolute;
          background-color: #f6f6f6;
          min-width: 230px;
          overflow: auto;
          border: 1px solid #ddd;
          z-index: 1;
        }
    
        .dropdown-content a {
          color: black;
          padding: 12px 16px;
          text-decoration: none;
          display: block;
        }
    
        .dropdown a:hover {
          background-color: #ddd;
        }
    
        .show {
          display: block;
        }
</style>
<script> const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];</script>

</head>

<body>

<div class="content-wrap">
    <div class="main">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-8 p-r-0 title-margin-right">
                    <div class="page-header">
                        <!-- <div class="page-title">
                            <h1>Hello, <span>Welcome Here</span></h1>
                        </div> -->
                    </div>
                </div>
                
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-title">
                            <h4>Search</h4>

                        </div>
                        <div class="dropdown">
                            <label><h3></label></h3> <button  padding="40px" onclick="myFunction()" class="dropbtn">Recovery Amount</button>
                           
                          </div>
                        <script>
                        function myFunction() {
                            document.getElementById("myDropdown").classList.toggle("show");
                          }
                      
                          function filterFunction() {
                            var input, filter, ul, li, a, i;
                            input = document.getElementById("myInput");
                            filter = input.value.toUpperCase();
                            div = document.getElementById("myDropdown");
                            a = div.getElementsByTagName("a");
                            for (i = 0; i < a.length; i++) {
                              txtValue = a[i].textContent || a[i].innerText;
                              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                a[i].style.display = "";
                              } else {
                                a[i].style.display = "none";
                              }
                            }
                          }
                        </script>
                      <div class="col-lg-12">
                          <div class="card">
                              <div class="card-title">
                                  <h4>Recovery Amount</h4>
      
                              </div>


                        <div class="card-body">
                            <div class="horizontal-form-elements">
                                <form class="form-horizontal" action="\recovery" method="post">
                                    <div class="row">
                                        <div class="col-lg-6">
                                               
                              
                        <% var i = 0 %>
           
                                              <div class="form-group">
                                                <label class="col-sm-6 control-label">Employee ID</label>
                                                <div class="col-sm-10">
                                                    <input name="empID" value="<%= name[i].empID %>" type="text" id="<%= name[i].empID %>" class="form-control" readonly>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-6 control-label">Employee Name</label>
                                                <div class="col-sm-10">
                                                    <input name="empName" value="<%= name[i].empName %>" type="text" id="<%= name[i].empName %>" class="form-control" readonly>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-6 control-label">Recovery Amount</label>
                                                <div class="col-sm-10">
                                                    <input type="text" name="recoveryAmount" class="form-control"
                                                        placeholder="Enter Details" required>
                                                </div>
                                            </div>

                                        
                                        </div>
                                            
                                            <div class="col-lg-6">

                                              <div class="form-group">
                                                <label class="col-sm-6 control-label">Month</label>
                                                <div class="col-sm-10">
                                                    <!-- <select class="form-control" name="month">
                                                       
                                                        <option name="month" id="demo" ></option>
                                                        <option  id="demo1" ></option>
                                                    </select> -->

                                                    <select class="form-control" name="month">                                                    
                                                      <!-- <option id="demo" ></option>
                                                       <option id="demo1" ></option> -->
                                                       <option value="January">January</option>
                                                       <option value="February">February</option>
                                                       <option value="March">March</option>
                                                       <option value="April">April</option>
                                                       <option value="May">May</option>
                                                       <option value="June">June</option>
                                                       <option value="July">July</option>
                                                       <option value="August">August</option>
                                                       <option value="September">September</option>
                                                       <option value="October">October</option>
                                                       <option value="November">November</option>
                                                       <option value="December">December</option>
                                                  </select>
                                                </div>
                                            </div>
                                            <script>
                                              const d = new Date();
                                              document.getElementById("demo").innerHTML = months[d.getMonth()];
                                              document.getElementById("demo1").innerHTML = months[(d.getMonth()+1)%12];
                                              </script>

                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label">Year</label>
                                                    <div class="col-sm-10">
                                                        <select class="form-control" name="year">
                                                            <option value="2021" id="2021" selected>2021</option>
                                                                            <option value="2023" id="2022" selected>2022</option>
                                                                            <option value="2023" id="2023" selected>2023</option>
                                                                            
                                                        </select>
                                                    </div>
                                                </div>


                                                
                                              <div class="form-group">
                                                <label class="col-sm-6 control-label">Note for Recovery Amount</label>
                                                <div class="col-sm-10">
                                                    <input type="textbox" name="note" class="form-control"
                                                        placeholder="Enter Note" required>
                                                </div>
                                            </div>       
                                     

                                               
                                                <br />
                                                <div class="row text-center">
                                                  <div>
                                                    <button class="button large round success" onclick="submitFn(event)">Submit</button>
                                                  </div>
                                                </div>

                                            </div>

                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </section>
        </div>
    </div>
</div>
<script>
  function submitFn(event) {
      event.preventDefault()
      console.log("HERE")
      var data=document.querySelectorAll('select,input')
     
      console.log("data2" + data)
      var sendData={}
      for (var i in data) {
              var prop=data[i].name;
              sendData[prop]=data[i].value;
      }

    
      console.log("sendData" + sendData)
  
      axios.post('http://localhost:3000/recovery',sendData)
          .then(function (response) {
              if(response.data.status=="error")
              {
                  console.log("status" + response.data)
                  console.log("ERROR")
                  var message=response.data.message
                  alertify.set({ delay: 3000 });
          alertify.error(message); 
                           
              }
              else
              {
                  console.log("SUCCESS")
                  console.log(response)
                  var message=response.data.message
                  alertify.set({ delay: 3000 });
                  alertify.success(message);  

                  // await axios.post('http://localhost:3000/trial')

                  
              }
              
          })
          .catch(function (error) {
              //console.log("ERROR")
              console.log(error)
          });   
  }
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js'></script><script  src="../assets/alert/script.js"></script>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script src="../assets/assets/js/lib/bootstrap.min.js"></script><script src="../assets/assets/js/scripts.js"></script>
    <!-- scripit init-->
    <script src="../assets/assets/js/lib/data-table/datatables.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/dataTables.buttons.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.flash.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/jszip.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/pdfmake.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/vfs_fonts.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.html5.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.print.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/datatables-init.js"></script>

    
</body>

</html>