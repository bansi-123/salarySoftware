<%- include('partials/header.ejs'); -%>

    <head>

        <meta charset="UTF-8">
        <link rel='stylesheet' href='https://cdn.jsdelivr.net/foundation/5.5.0/css/foundation.css'>
        <link rel="stylesheet" href="../assets/alert/style.css">
        <!-- <link href="../assets/alert/style.css" rel="stylesheet">
  
    <script src="../assets/alert/script.js"></script> -->

    </head>

    <body>

        <div class="content-wrap">
            <div class="main">
                <div class="container-fluid">
                    <!-- <form class="form-horizontal" action="\deductions" method="post"> -->
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-lg-8 p-r-0 title-margin-right">
                                <div class="page-header">
                                    <div class="page-title">
                                        <h1>Deductions</h1>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-title">
                                        <h4>Provident Fund</h4>

                                    </div>


                                    <div class="card-body">
                                        <div class="horizontal-form-elements">

                                            <div class="row">
                                                <div class="col-lg-6">

                                                    <div class="form-group">
                                                        <label class="col-sm-10 control-label">Provident Fund Does Not
                                                            Apply If
                                                            Amount</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prov_fund_DNA" id="prov_fund_DNA"
                                                                class="form-control" value=<%=data[0].prov_fund_DNA %>>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-10 control-label">Maximum Provident Fund To
                                                            Be
                                                            Given</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prov_fund_Max" class="form-control"
                                                                value=<%=data[0].prov_fund_Max %>>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="col-sm-6 control-label">Provident Fund
                                                            Percentage</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prov_fund_Percent"
                                                                class="form-control" value=<%=data[0].prov_fund_Percent
                                                                %> required="required">

                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-title">
                                        <h4>Professional Tax</h4>

                                    </div>


                                    <div class="card-body">
                                        <div class="horizontal-form-elements">

                                            <div class="row">
                                                <div class="col-lg-6">

                                                    <div class="form-group">
                                                        <label class="col-sm-10 control-label">Professional Tax Does Not
                                                            Apply If
                                                            Amount</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prof_tax_DNA" class="form-control"
                                                                value=<%=data[0].prof_tax_DNA %> required="required">
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-10 control-label">Maximum Professional Tax
                                                            To Be
                                                            Given</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prof_tax_Max" class="form-control"
                                                                value=<%=data[0].prof_tax_Max %> required="required">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="col-sm-6 control-label">Professional Tax If
                                                            between 7501 to 10000</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="prof_tax_Percent"
                                                                class="form-control" value=<%=data[0].prof_tax_Percent
                                                                %> required="required">

                                                        </div>
                                                    </div>


                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-title">
                                        <h4>Revenue Stamp</h4>

                                    </div>
                                    <div class="card-body">
                                        <div class="horizontal-form-elements">

                                            <div class="row">
                                                <div class="col-lg-6">

                                                    <div class="form-group">
                                                        <label class="col-sm-10 control-label">Revenue Stamp Does Not
                                                            Apply If
                                                            Amount</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="rev_stamp_DNA" class="form-control"
                                                                value=<%=data[0].rev_stamp_DNA %> required="required">
                                                        </div>
                                                    </div>


                                                </div>

                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="col-sm-6 control-label">Max Revenue</label>
                                                        <div class="col-sm-10">
                                                            <input type="text" name="rev_stamp_max" class="form-control"
                                                                value=<%=data[0].rev_stamp_max %> required="required">

                                                        </div>
                                                    </div>


                                                </div>

                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-title">
                                        <h4>Standard Deduction</h4>
                                        <div class="card-body">
                                            <div class="horizontal-form-elements">

                                                <div class="row">
                                                    <div class="col-lg-6">

                                                        <div class="form-group">
                                                            <label class="col-sm-10 control-label">
                                                                Standard Deduction</label>
                                                            <div class="col-sm-10">
                                                                <input type="text" name="st_ded" class="form-control"
                                                                    value=<%=data[0].st_ded %> required>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-title">
                                        <h4>Standard Deduction</h4>
                                        <div class="card-body">
                                            <div class="horizontal-form-elements">

                                                <div class="row">
                                                    <div class="col-lg-6">

                                                        <div class="form-group">
                                                            <label class="col-sm-10 control-label">
                                                                Standard Deduction</label>
                                                            <div class="col-sm-10">
                                                                <input type="text" name="st_ded" class="form-control"
                                                                    value=<%=data[0].st_ded %> required="required">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>

                            <br />
                            <!-- <div class="container" style="float: right;"> -->

                            <!-- <button onclick="submitFn(event)">Submit</button> -->

                            <button class="button large round success" style="float: right;"
                                onclick="submitFn(event)">Submit</button>
                            <!-- </div> -->
                    </form>

                </div>
            </div>



        </div>
        <!-- </div>
        </div>
        </div> -->

        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js'></script>
        <script src="../assets/alert/script.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            // function myFunction() {
            //   alert("Deductions Edited Successfully!");
            // }
            function submitFn(event) {
                event.preventDefault()
                console.log("HERE")
                var data = document.getElementsByTagName("input")
                var sendData = {}
                for (var i in data) {
                    var prop = data[i].name;
                    sendData[prop] = data[i].value
                }


                console.log("data" + data)
                console.log("sendData" + sendData)

                axios.post('http://localhost:3000/deductions', sendData)
                    .then(function (response) {
                        if (response.data.status == "error") {
                            console.log("status" + response.data)
                            console.log("ERROR")
                            var message = response.data.message
                            alertify.set({ delay: 3000 });
                            alertify.error(message);

                        }
                        else {
                            console.log("SUCCESS")

                            console.log(response)
                            var message = response.data.message
                            alertify.set({ delay: 3000 });
                            alertify.success(message);
                        }

                    })
                    .catch(function (error) {
                        //console.log("ERROR")
                        console.log(error)
                    });
            }
        </script>

        <script src="../assets/alert/script.js"></script>
    </body>
    <%- include("partials/footer"); -%>