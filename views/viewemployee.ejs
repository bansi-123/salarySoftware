<%- include('partials/header.ejs'); -%>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
    <style>
      .arrow {
        border: solid black;
        border-width: 0 3px 3px 0;
        display: inline-block;
        padding: 3px;

      }

      .down {
        transform: rotate(45deg);
        -webkit-transform: rotate(45deg);
      }

      .split {
        height: 100%;
        width: 50%;
        position: fixed;
        z-index: 1;
        top: 0;
        overflow-x: hidden;
        padding-top: 20px;
      }

      .left {
        left: 0;
        background-color: #ADD8E6;
      }

      .right {
        right: 0;
        background-color: #ADD8E6;
      }

      .centered {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }

      .card {
        margin: 0 auto;
        /* Added */
        float: none;
        /* Added */
        margin-bottom: 10px;
        /* Added */
      }

      @media screen {
        #printSection {
          display: none;
        }
      }

      @media print {
        body * {
          visibility: hidden;
        }

        #printSection,
        #printSection * {
          visibility: visible;
        }

        #printSection {
          position: absolute;
          left: 0;
          top: 0;
        }
      }
    </style>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  </head>

  <body>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <div class="content-wrap">
      <div class="main">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-8 p-r-0 title-margin-right">
              <div class="page-header">
                <div class="page-title">
                  <h1>Hello, <span>Welcome Here</span></h1>
                </div>
              </div>
            </div>
            <!-- /# column -->
            <div class="col-lg-4 p-l-0 title-margin-left">
              <div class="page-header">
                <div class="page-title">
                  <ol class="breadcrumb">

                  </ol>
                </div>
              </div>
            </div>
            <!-- /# column -->
          </div>
          <!-- /# row -->

          <section id="main-content">
            <div class="row">
              <div class="col-lg-12">
                <div class="card">
                  <div class="bootstrap-data-table-panel">
                    <div class="table-responsive">

                      <table id="bootstrap-data-table-export" class="table table-striped table-bordered">
                        <thead>
                          <tr>
                            <th>Employee ID <p><i class="arrow down" style="float: right;"></i></th>
                            <th>Name <p><i class="arrow down" style="float: right;"></i></th>
                            <th>Department <p><i class="arrow down" style="float: right;"></i></th>
                            <th>Designation<p><i class="arrow down" style="float: right;"></i></th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% for(var i=Employees.length-1; i>= 0 ; i-- ) { %>
                            <tr>
                              <td>
                                <%= Employees[i].empID %>
                              </td>
                              <td>
                                <%= Employees[i].empName %>
                              </td>
                              <td>
                                <%= Employees[i].dept %>
                              </td>
                              <td>
                                <%= Employees[i].designation %>
                              </td>
                              <td>

                                <div class="wrap">
                                  <!-- <h1>Bootstrap Modal Example</h1> -->
                                  <button type="button" class="btn btn-primary" data-toggle="modal"
                                    data-target="#MyModal">
                                    Large modal
                                  </button>
                                </div>
                                <div id="printThis">
                                  <div id="MyModal" class="modal fade" tabindex="-1" role="dialog"
                                    aria-labelledby="myLargeModalLabel" aria-hidden="true">

                                    <div class="modal-dialog modal-lg">

                                      <!-- Modal Content: begins -->
                                      <div class="modal-content">

                                        <!-- Modal Header -->
                                        <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal"
                                            aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                          <h4 class="modal-title" id="gridSystemModalLabel">Your Headings</h4>
                                        </div>



                                        <div class="modal-body">
                                          <!-- <table class="table table-hover"><br>
                                            <thead>
                                              <tr>
                                                <th> </th>
                                                <th>Field</th>
                                                <th>Value</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <th scope="row">1</th>
                                                <td>Employee ID</td>
                                                <td>
                                                  <%= Employees[i].empID %>
                                                </td>
                                              </tr>
                                              <tr>
                                                <th scope="row">1</th>
                                                <td>Name</td>
                                                <td>
                                                  <%= Employees[i].empName %>
                                                </td>
                                              </tr>
                                              <tr>
                                                <th scope="row">2</th>
                                                <td>Email ID</td>
                                                <td>
                                                  <%= Employees[i].emailID %>
                                                </td>
                                              </tr>
                                              <tr>
                                                <th scope="row">1</th>
                                                <td>Department</td>
                                                <td>
                                                  <%= Employees[i].dept %>
                                                </td>
                                              </tr>
                                              <tr>
                                                <th scope="row">1</th>
                                                <td>Designation</td>
                                                <td>
                                                  <%= Employees[i].designation %>
                                                </td>
                                              </tr>

                                              
                                          </tbody>
                                        </table> -->
                                          <div class="media align-items-center py-3 mb-3">
                                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""
                                              class="d-block ui-w-100 rounded-circle">
                                            <div class="media-body ml-4">
                                              <h4 class="font-weight-bold mb-0">John Doe <span
                                                  class="text-muted font-weight-normal">@johndoe</span></h4>
                                              <div class="text-muted mb-2">ID: 3425433</div>
                                              <!-- <a href="javascript:void(0)" class="btn btn-primary btn-sm">Edit</a>&nbsp;
                                            <a href="javascript:void(0)" class="btn btn-default btn-sm">Profile</a>&nbsp; -->
                                              <a href="javascript:void(0)" class="btn btn-default btn-sm icon-btn"><i
                                                  class="fa fa-mail"></i></a>
                                            </div>
                                          </div>

                                          <div class="card mb-4">
                                            <div class="card-body">
                                              <table class="table user-view-table m-0">
                                                <tbody>
                                                  <tr>
                                                    <td>Registered:</td>
                                                    <td>01/23/2017</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Latest activity:</td>
                                                    <td>01/23/2018 (14 days ago)</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Verified:</td>
                                                    <td><span class="fa fa-check text-primary"></span>&nbsp; Yes</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Role:</td>
                                                    <td>User</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Status:</td>
                                                    <td><span class="badge badge-outline-success">Active</span></td>
                                                  </tr>
                                                </tbody>
                                              </table>
                                            </div>
                                            <hr class="border-light m-0">
                                            <!-- <div class="table-responsive">
                                              <table class="table card-table m-0">
                                                <tbody>
                                                  <tr>
                                                    <th>Module Permission</th>
                                                    <th>Read</th>
                                                    <th>Write</th>
                                                    <th>Create</th>
                                                    <th>Delete</th>
                                                  </tr>
                                                  <tr>
                                                    <td>Users</td>
                                                    <td><span class="fa fa-check text-primary"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                  </tr>
                                                  <tr>
                                                    <td>Articles</td>
                                                    <td><span class="fa fa-check text-primary"></span></td>
                                                    <td><span class="fa fa-check text-primary"></span></td>
                                                    <td><span class="fa fa-check text-primary"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                  </tr>
                                                  <tr>
                                                    <td>Staff</td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                    <td><span class="fa fa-times text-light"></span></td>
                                                  </tr>
                                                </tbody>
                                              </table>
                                            </div> -->
                                          </div>

                                          <hr class="border-light m-0">
              <div class="card-body">

                <table class="table user-view-table m-0">
                  <tbody>
                    <tr>
                      <td>Username:</td>
                      <td>nmaxwell</td>
                    </tr>
                    <tr>
                      <td>Name:</td>
                      <td>Nelle Maxwell</td>
                    </tr>
                    <tr>
                      <td>E-mail:</td>
                      <td>nmaxwell@mail.com</td>
                    </tr>
                    <tr>
                      <td>Company:</td>
                      <td>Company Ltd.</td>
                    </tr>
                  </tbody>
                </table>

                <h6 class="mt-4 mb-3">Social links</h6>

                <table class="table user-view-table m-0">
                  <tbody>
                    <tr>
                      <td>Twitter:</td>
                      <td><a href="javascript:void(0)">https://twitter.com/user</a></td>
                    </tr>
                    <tr>
                      <td>Facebook:</td>
                      <td><a href="javascript:void(0)">https://www.facebook.com/user</a></td>
                    </tr>
                    <tr>
                      <td>Instagram:</td>
                      <td><a href="javascript:void(0)">https://www.instagram.com/user</a></td>
                    </tr>
                  </tbody>
                </table>

                <h6 class="mt-4 mb-3">Personal info</h6>

                <table class="table user-view-table m-0">
                  <tbody>
                    <tr>
                      <td>Birthday:</td>
                      <td>May 3, 1995</td>
                    </tr>
                    <tr>
                      <td>Country:</td>
                      <td>Canada</td>
                    </tr>
                    <tr>
                      <td>Languages:</td>
                      <td>English</td>
                    </tr>
                  </tbody>
                </table>

                <h6 class="mt-4 mb-3">Contacts</h6>

                <table class="table user-view-table m-0">
                  <tbody>
                    <tr>
                      <td>Phone:</td>
                      <td>+0 (123) 456 7891</td>
                    </tr>
                  </tbody>
                </table>

                <h6 class="mt-4 mb-3">Interests</h6>

                <table class="table user-view-table m-0">
                  <tbody>
                    <tr>
                      <td>Favorite music:</td>
                      <td>
                        Rock,
                        Alternative,
                        Electro,
                        Drum &amp; Bass,
                        Dance
                      </td>
                    </tr>
                    <tr>
                      <td>Favorite movies:</td>
                      <td>
                        The Green Mile,
                        Pulp Fiction,
                        Back to the Future,
                        WALLÂ·E,
                        Django Unchained,
                        The Truman Show,
                        Home Alone,
                        Seven Pounds
                      </td>
                    </tr>
                  </tbody>
                </table>

              </div>
                                        </div>


                                        <!-- Modal Footer -->
                                        <div class="modal-footer">
                                          <button class="btn btn-danger" data-dismiss="modal"
                                            aria-hidden="true">Close</button>
                                          <button id="btnPrint" type="button" class="btn btn-default">Print</button>
                                        </div>

                                      </div>
                                      <!-- Modal Content: ends -->

                                    </div>
                                  </div>
                                </div>



                                <button type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal"
                                  data-target="#a<%= Employees[i].empID %>">
                                  Edit
                                </button>
                                <div class="modal fade" id="a<%= Employees[i].empID %>" tabindex="-1" role="dialog"
                                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                  <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Edit Details</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                      </div>
                                      <div class="modal-body">
                                        <div class="form-group">
                                          <label class="col-sm-6 control-label">Employee Name</label>
                                          <div class="col-sm-10">
                                            <input type="text" name="empName" class="form-control"
                                              placeholder="Enter Name">
                                          </div>
                                        </div>

                                        <div class="form-group">
                                          <label class="col-sm-6 control-label">Email ID</label>
                                          <div class="col-sm-10">
                                            <input id="example-email" class="form-control" type="email"
                                              placeholder="admin@pict.edu" name="example-email">
                                          </div>
                                        </div>

                                        <div class="form-group">
                                          <label class="col-sm-6 control-label">Designation</label>
                                          <div class="col-sm-10">
                                            <select class="form-control" name="designation">
                                              <option value="value" selected>Option Name</option>
                                              <option value="professor" id="professor" selected>Professor</option>
                                              <option value="associateprof" id="associateprof" selected>Associate
                                                Professor</option>
                                              <option value="asstprof" id="asstprof" selected>Assistant Professor
                                              </option>
                                              <option value="techasst" id="techasst" selected>Technical Assistant
                                              </option>
                                              <option value="labasst" id="labasst" selected>Lab Assistant</option>
                                              <option value="nonteaching" id="nonteaching" selected>Non Teaching
                                              </option>
                                            </select>
                                          </div>
                                        </div>

                                        <div class="form-group">
                                          <label class="col-sm-6 control-label">Salary Category</label>
                                          <div class="col-sm-10">
                                            <select class="form-control" name="SalaryCategory">
                                              <option value="value" selected>Option Name</option>
                                              <option value="consolidated" id="consolidated" selected>
                                                Consolidated</option>
                                              <option value="payscale" id="payscale" selected>Pay
                                                Scale</option>

                                            </select>
                                          </div>

                                        </div>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-outline-secondary"
                                          data-dismiss="modal">Close</button>

                                      </div>
                                    </div>
                                  </div>
                                </div>



                                <a href="/uploads/<%=Employees[i].empID%>"><button type="submit"
                                    class="btn btn-outline-success btn-sm">Print</button></a>


                                <button type="button" class="btn btn-outline-danger btn-sm" data-toggle="modal"
                                  data-target="#b<%= Employees[i].empID %>">
                                  Delete
                                </button>

                                <div class="modal fade" id="b<%= Employees[i].empID %>" tabindex="-1" role="dialog"
                                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                  <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">confirm</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                      </div>
                                      <div class="modal-body">
                                        ...
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                          data-dismiss="modal">Close</button>
                                        <button" class="btn btn-primary" id="<%= Employees[i].empID %>"
                                          onclick="deleteFunction(this.id,this)" data-dismiss="modal">Delete</button>

                                      </div>
                                    </div>
                                  </div>
                                </div>

                              </td>
                            </tr>
                            <% }%>
                        </tbody>


                      </table>



                    </div>

                  </div>
                </div>
                <!-- /# card -->
              </div>

            </div>

            <!-- <input type="submit" style="float: right;" value="Submit"> -->

        </div>


        <!-- /# row -->


        </section>
      </div>
    </div>
    </div>


    <!-- bootstrap -->

    <script src="../assets/assets/js/lib/bootstrap.min.js"></script>
    <script src="../assets/assets/js/scripts.js"></script>
    <!-- scripit init-->
    <script src="../assets/assets/js/lib/data-table/datatables.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/dataTables.buttons.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.flash.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/jszip.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/pdfmake.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/vfs_fonts.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.html5.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/buttons.print.min.js"></script>
    <script src="../assets/assets/js/lib/data-table/datatables-init.js"></script>
    <script>
      function deleteFunction(id, ref) {
        console.log(id)
        axios.post('http://localhost:3000/deleteEmployee', { id })
          .then(function (response) {
            console.log(response)
            if (response.data.status === "success") {
              // console.log(ref)
              ref.parentNode.parentNode.remove()
              alert("Deleted successfully!")
              // confirm("Deleted!");
              window.location.reload();
              // res.redirect('viewemployee');
            }
          })
          .catch(function (error) {
            console.log(error)
          });
      }
    </script>

    <script>
      document.getElementById("btnPrint").onclick = function () {
        printElement(document.getElementById("printThis"));
      }

      function printElement(elem) {
        var domClone = elem.cloneNode(true);

        var $printSection = document.getElementById("printSection");

        if (!$printSection) {
          var $printSection = document.createElement("div");
          $printSection.id = "printSection";
          document.body.appendChild($printSection);
        }

        $printSection.innerHTML = "";
        $printSection.appendChild(domClone);
        window.print();
      }
    </script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js'></script>


    <!-- <script>
  function deleteFunction() {
    confirm("Deleted!");
  }
  </script> -->

  </body>

  </html>