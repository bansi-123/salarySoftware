<%- include('partials/header.ejs'); -%>

  <head>
    <meta charset="UTF-8">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/foundation/5.5.0/css/foundation.css'>
    <link rel="stylesheet" href="../assets/alert/style.css">
    <script>
      function myFunction() {
        alert("Declarations Added Successfully!");
      }
      </script>
    <style>
      /* .dropbtn {
      background-color: #04AA6D;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
      cursor: pointer;
    } */

      .dropbtn:hover,
      .dropbtn:focus {
        background-color: #3e8e41;
      }

      #myInput {
        box-sizing: border-box;
        background-image: url('searchicon.png');
        background-position: 14px 12px;
        background-repeat: no-repeat;
        font-size: 16px;
        padding: 14px 20px 12px 45px;
        border: none;
        border-bottom: 1px solid #ddd;
      }

      #myInput:focus {
        outline: 3px solid #ddd;
      }

      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f6f6f6;
        min-width: 230px;
        overflow: auto;
        border: 1px solid #ddd;
        z-index: 1;
      }

      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .dropdown a:hover {
        background-color: #ddd;
      }

      .show {
        display: block;
      }
    </style>
    <script> const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    </script>
  </head>

  <body>

    <div class="content-wrap">
      <div class="main">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-8 p-r-0 title-margin-right">
              <div class="page-header">
                <!-- <div class="page-title">
                            <h1>Hello, <span>Welcome Here</span></h1>
                        </div> -->
              </div>
            </div>

            <div class="col-lg-12">
              <div class="card">
                <div class="card-title">
                  <h4>Search</h4>

                </div>
                <div class="dropdown">
                  <label>
                    <h3>
                  </label></h3> <button padding="40px" onclick="myFunction()" class="dropbtn">Income Tax Declaration
                    </button>
                  <div id="myDropdown" class="dropdown-content">
                    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">

                    <% for(var i=Employees.length-1; i>= 0; i-- ) { %>
                      <a href="/declarations/<%=Employees[i].empID%>">
                        <%= Employees[i].empName %>
                      </a>
                      <% }%>
                  </div>
                </div>
                <script>
                  function myFunction() {
                    document.getElementById("myDropdown").classList.toggle("show");
                  }

                  function filterFunction() {
                    var input, filter, ul, li, a, i;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase();
                    div = document.getElementById("myDropdown");
                    a = div.getElementsByTagName("a");
                    for (i = 0; i < a.length; i++) {
                      txtValue = a[i].textContent || a[i].innerText;
                      if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        a[i].style.display = "";
                      } else {
                        a[i].style.display = "none";
                      }
                    }
                  }
                </script>
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-title">
                      <h4>Declarations</h4>

                    </div>

                    <form class="form-horizontal" action="\declarations" method="post">
                    <div class="card-body">
                      <div class="horizontal-form-elements">
                        
                            <div class="row">
                                <% var i=0 %>
                                <div class="col-lg-6">

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label"> Employee ID
                                            (empXXX) <span class="text-danger">*</span></label>
                                        <div class="col-lg-6">
                                            <input type="text" name="empID" class="form-control"  
                                            value="<%= name[i].empID %>" pattern="+emp." title="enter valid emp ID" readonly
                                                ruqt>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">Name (As per Aadhar Card) <span
                                                class="text-danger">*</span>
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="empName" class="form-control" value="<%= name[i].empName %>"
                                               readonly ruqt>
                                        </div>
                                    </div>

                                
                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">PAN No. <span
                                                class="text-danger">*</span>
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="Pan_No" class="form-control"
                                                pattern=".{10,10}" title="10 alphanumeric characters needed" value="<%= name[i].Pan_No %>"
                                               readonly ruqt>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">Tax Regime <span
                                                class="text-danger">*</span>
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="emp_temp_regime" class="form-control" id="regime"
                                            value="<%= name[i].emp_temp_regime %>" readonly ruqt>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">Gross Total</label>
                                        <div class="col-lg-6">
                                            <input type="number" value=0 name="gross_total" class="form-control" ruqt>
                                        </div>
                                    </div>

                                    <div class="form-group row" id="ihl">
                                      <label class="col-lg-6 col-form-label">Interest on Housing Loan</label>
                                      <div class="col-lg-6">
                                          <input type="number" value=0  name="ihl" class="form-control" ruqt>
                                      </div>
                                    </div>

                                    <!-- <div class="form-group row" id="c">
                                        <label class="col-lg-6 col-form-label">80C</label>
                                        <div class="col-lg-6">
                                            <input type="number" value=0  name="c" class="form-control" ruqt>
                                        </div>
                                    </div> -->

                                    <div class="form-group row" id="g">
                                        <label class="col-lg-6 col-form-label">80G (Donation)</label>
                                        <div class="col-lg-6">
                                            <input type="number" value=0 name="g" class="form-control" ruqt>
                                        </div>
                                    </div>
                                    
                                    
                                    

                                </div>
                                    <div class="col-lg-6">

                                        <div class="form-group row" id="d">
                                            <label class="col-lg-6 col-form-label">80D (Mediclaim)</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="d" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row" id="e">
                                            <label class="col-lg-6 col-form-label">80E (Interest Paid on Educational Loan â€“ No Limit)</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="e" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row" id="ccc">
                                            <label class="col-lg-6 col-form-label">80CCC</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="ccc" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row" id="ccd">
                                            <label class="col-lg-6 col-form-label">80CCD (National Pension Scheme(NPS))</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="ccd" class="form-control" ruqt>
                                            </div>
                                        </div>

                                        <input type="number" name="age" value="<%= name[i].age %>" class="form-control" hidden >

                                        <div class="form-group row" id="dd">
                                            <label class="col-lg-6 col-form-label">80DD</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="dd" class="form-control" ruqt>
                                            </div>
                                        </div>
                                       

                                    </div>
                                    <!--card ka end -->
                                    

                                    <br />


                                
                            </div>

                            


                       
                      </div>
                    </div>

                    
                  </div>
                </div>

                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-title">
                      <h4>80C</h4>

                    </div>


                    <div class="card-body">
                      <div class="horizontal-form-elements">
                     
                            <div class="row">
                                <% var i=0 %>
                                <div class="col-lg-6">

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label"> 	EPF (Employee Provident Fund) </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="epf" class="form-control">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">	PPF (Public Provident Fund) 
                                                
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="ppf" class="form-control" 
                                              >
                                        </div>
                                    </div>

                                
                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">NSC (National Saving Certificate) 
                                               
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="nsc" class="form-control"
                                                 
                                                >
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">ULIP (Unit Linked Insurance Plan)/ MF (Mutual Fund) 
                                                
                                        </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="ulip" class="form-control" id="regime"
                                            >
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label">Annual Insurance Premium</label>
                                        <div class="col-lg-6">
                                            <input type="number" value=0 name="insurancePremium" class="form-control" ruqt>
                                        </div>
                                    </div>

                                   

                                  
                                    
                                    
                                    

                                </div>
                                    <div class="col-lg-6">

                                        <div class="form-group row">
                                            <label class="col-lg-6 col-form-label">	Housing loan Principal Amount</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="houseLoan" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-6 col-form-label">	Tuition Fee for Children</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="tuitionFee" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-6 col-form-label">	Bank Deposits</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="bankDeposits" class="form-control" ruqt>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-6 col-form-label">	Registration Fee</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="regFee" class="form-control" ruqt>
                                            </div>
                                        </div>

                          
                                       

                                    </div>
                                    <!--card ka end -->
                                   

                                    <br />


                                
                            </div>

                            


                      
                      </div>
                    </div>

                    
                  </div>
                </div>

                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-title">
                      <h4>80G</h4>

                    </div>


                    <div class="card-body">
                      <div class="horizontal-form-elements">
                
                            <div class="row">
                                <% var i=0 %>
                                <div class="col-lg-6">

                                    <div class="form-group row">
                                        <label class="col-lg-6 col-form-label"> Amt paid to Government considered before adjusted gross salary  </label>
                                        <div class="col-lg-6">
                                            <input type="text" name="govtAmt" class="form-control">
                                        </div>
                                    </div>
 

                                </div>
                                    <div class="col-lg-6">

                                        <div class="form-group row">
                                            <label class="col-lg-6 col-form-label">Amt paid to NGO after adjusted gross salary</label>
                                            <div class="col-lg-6">
                                                <input type="number" value=0 name="ngoAmt" class="form-control" ruqt>
                                            </div>
                                        </div>
                                       
                                    </div>
                                    <!--card ka end -->
                                    <button class="button large round success" onclick="submitFn(event)">Submit</button>

                                    <br />


                                
                            </div>

                            


                        </form>
                      </div>
                    </div>

                    
                  </div>
                </div>
              </div>
              </section>
            </div>
          </div>
        </div>

        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js'></script>
        <script src="../assets/alert/script.js"></script>

        <script>
          var regime = document.getElementById("regime").value;
          console.log("regime is");
          console.log(regime)
          if(regime=="new")
          {
            var regime = document.getElementById("c").style.display="none";
            var regime = document.getElementById("g").style.display="none";
            var regime = document.getElementById("d").style.display="none";
            var regime = document.getElementById("e").style.display="none";
            var regime = document.getElementById("ccc").style.display="none";
            var regime = document.getElementById("ccd").style.display="none";
            var regime = document.getElementById("dd").style.display="none";
            // var regime = document.getElementById("regime").value;
            // var regime = document.getElementById("regime").value;
            // var regime = document.getElementById("regime").value;
          }
        </script>
<script>
  function submitFn(event) {
      event.preventDefault()
      console.log("HERE")
      var data=document.querySelectorAll('select,input')
     
      console.log("data2" + data)
      var sendData={}
      for (var i in data) {
              var prop=data[i].name;
              sendData[prop]=data[i].value;
      }

    
      console.log("sendData" + sendData)
  
      axios.post('http://localhost:3000/declarations',sendData)
          .then(function (response) {
              if(response.data.status=="error")
              {
                  console.log("status" + response.data)
                  console.log("ERROR")
                  var message=response.data.message
                  alertify.set({ delay: 3000 });
          alertify.error(message); 
                           
              }
              else
              {
                  console.log("SUCCESS")
                  console.log(response)
                  var message=response.data.message
                  alertify.set({ delay: 3000 });
                  alertify.success(message);  
              }
              
          })
          .catch(function (error) {
              //console.log("ERROR")
              console.log(error)
          });   
  }
</script>
        <script src="../assets/assets/js/lib/bootstrap.min.js"></script>
        <script src="../assets/assets/js/scripts.js"></script>
        <!-- scripit init-->
        <script src="../assets/assets/js/lib/data-table/datatables.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/dataTables.buttons.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/buttons.flash.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/jszip.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/pdfmake.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/vfs_fonts.js"></script>
        <script src="../assets/assets/js/lib/data-table/buttons.html5.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/buttons.print.min.js"></script>
        <script src="../assets/assets/js/lib/data-table/datatables-init.js"></script>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </body>

  </html>
  <%- include("partials/footer"); -%>